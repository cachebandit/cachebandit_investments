/* --- Volatility Analysis Layout (final tuned) --- */

/* Layout for the two panels side by side */
.volatility-grid-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    align-items: start;
}

/* Each panel box card */
.volatility-box {
    background-color: var(--container-bg);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    box-shadow: 0 1px 3px rgba(0,0,0,0.05);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

/* Panel header (Oversold / Overbought line) */
.volatility-box h2 {
    margin: 0;
    padding: 12px 16px;
    background-color: #f8f9fa;
    border-bottom: 1px solid var(--border-color);
    font-size: 16px;
    font-weight: 600;
    color: var(--text-primary);
    display: flex;
    align-items: baseline;
    justify-content: space-between;
}

.volatility-box h2 .subtext {
    font-size: 11px;
    font-weight: 500;
    color: var(--text-secondary);
    line-height: 1.2;
}

/* ==========================
   SHARED GRID LAYOUT
   ========================== */

/* Tuned widths:
   1. Company: flex
   2. Price:   100px
   3. Chg:     120px
   4. ATR%:    70px
   5. RSI-1H:  70px
*/

.volatility-header-row,
.volatility-row {
    display: grid;
    grid-template-columns:
        minmax(200px, 1fr)
        100px
        120px
        70px
        70px;
    column-gap: 12px;
    align-items: center;
}

/* HEADER ROW ------------------------- */
.volatility-header-row {
    padding: 10px 16px;
    background-color: var(--hover-bg);
    border-bottom: 1px solid var(--border-color);
    font-size: 11px;
    font-weight: 600;
    color: var(--text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.03em;
    line-height: 1.2;
}

/* Center PRICE / CHG / ATR% / RSI-1H text in header.
   COMPANY stays left-aligned. */
.volatility-header-row > :nth-child(2),
.volatility-header-row > :nth-child(3),
.volatility-header-row > :nth-child(4),
.volatility-header-row > :nth-child(5) {
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
}

/* New wrapper around header row + list.
   This unifies the scrollable width so header and rows always line up,
   even when there's a scrollbar. */
.volatility-table {
    max-height: 70vh;
    overflow-y: auto;
    position: relative;
    /* same background as card to make sticky header look seamless */
    background-color: var(--container-bg);
    border-radius: 0 0 8px 8px;
}

/* LIST SCROLLER ---------------------- */
.volatility-list {
    /* used to have max-height and overflow-y, but not anymore */
}

/* BODY ROW --------------------------- */
.volatility-row {
    padding: 10px 16px;
    border-bottom: 1px solid var(--border-color);
    font-size: 13px;
    line-height: 1.4;
    cursor: pointer;
    transition: background-color 0.15s ease;
}

.volatility-row:last-child {
    border-bottom: none;
}
.volatility-row:hover {
    background-color: var(--hover-bg);
}

/* sticky header so column titles stay visible while scrolling */
.volatility-header-sticky {
    position: sticky;
    top: 0;
    z-index: 5;
    background-color: var(--hover-bg); /* same as existing header row bg */
    border-bottom: 1px solid var(--border-color);
}

/* COMPANY CELL (col 1) --------------- */

.company-cell {
    display: flex;
    align-items: flex-start;
    min-width: 0;
    gap: 6px;
}

/* Info icon button - match inline style of rest of project */
.company-info-btn {
    background: none;
    border: none;
    padding: 0;
    cursor: pointer;
    flex-shrink: 0;
    line-height: 0;
    display: flex;
    align-items: center;
    justify-content: center;
}

.company-info-btn img {
    width: 14px;
    height: 14px;
    opacity: 0.7;
    transition: transform 0.15s ease, opacity 0.15s ease;
    filter: grayscale(0.2);
}

.company-info-btn:hover img {
    transform: scale(1.08);
    opacity: 1;
    filter: none;
}

/* Logo bump from 20px → 24px */
.company-logo {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    border-radius: 4px;
    object-fit: contain;
    background-color: #fff;
    box-shadow: 0 0 0 1px var(--border-color);
    margin-top: 1px;
}

/* Text block (name line + industry line) */
.company-text-block {
    display: flex;
    flex-direction: column;
    min-width: 0;
}

/* grid for name + ticker chip so chip always lines up on same baseline */
.company-name-line {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: baseline;
    column-gap: 4px;
    min-width: 0;
    font-weight: 600;
    color: var(--text-primary);
    font-size: 13px;
    line-height: 1.2;
}

.company-name-text {
    min-width: 0;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
}

.ticker-chip {
    font-size: 11px;
    font-weight: 600;
    color: var(--accent-color);
    background-color: rgba(0,123,255,0.08);
    border-radius: 4px;
    padding: 2px 4px;
    line-height: 1.2;
    flex-shrink: 0;
    justify-self: start;
}

/* Industry line under name */
.company-subline {
    font-size: 11px;
    font-weight: 500;
    color: var(--text-secondary);
    line-height: 1.2;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* PRICE / CHANGE COLUMNS (cols 2–3) -- */

/* metric-col gets centered to match header alignment */
.metric-col {
    min-width: 0;
    display: flex;
    flex-direction: column;
    align-items: center;      /* center horizontally */
    justify-content: center;  /* center vertically within this grid cell */
    text-align: center;
}

.metric-main {
    font-weight: 600;
    color: var(--text-primary);
    font-size: 13px;
    line-height: 1.3;
    white-space: nowrap;
}

.metric-sub {
    font-size: 11px;
    font-weight: 500;
    line-height: 1.2;
    white-space: nowrap;
    color: var(--text-secondary);
}

/* Positive / negative color for change column */
.metric-change-up {
    color: var(--price-up-color);
}
.metric-change-down {
    color: var(--price-down-color);
}

/* ATR% / RSI-1H (cols 4–5) ---------- */

.badge-metric {
    min-width: 56px;
    height: 24px;
    box-sizing: border-box;

    display: flex;                /* flex, not inline-flex */
    align-items: center;
    justify-content: center;
    margin: 0 auto;               /* center the pill in its column */

    font-size: 12px;
    font-weight: 600;
    line-height: 1.2;

    padding: 4px 6px;
    border-radius: 4px;
    background-color: var(--hover-bg);
    color: var(--text-primary);
}

.badge-rsi-hot {
    background-color: #98FB98;
    color: #000;
}

.badge-rsi-cold {
    background-color: #FF6347;
    color: #fff;
}

/* Scrollbar styling for the list */
.volatility-list::-webkit-scrollbar {
    width: 6px;
}
.volatility-list::-webkit-scrollbar-track {
    background: transparent;
}
.volatility-list::-webkit-scrollbar-thumb {
    background-color: rgba(0,0,0,0.15);
    border-radius: 3px;
}

/* RESPONSIVE ------------------------ */
@media (max-width: 820px) {
    .volatility-grid-container {
        grid-template-columns: 1fr;
    }

    .volatility-box h2 {
        font-size: 15px;
        flex-wrap: wrap;
        row-gap: 4px;
    }

    .volatility-header-row,
    .volatility-row {
        grid-template-columns:
            minmax(140px, 1fr)
            80px
            110px
            60px
            60px;
        column-gap: 8px;
    }

    .volatility-header-row {
        font-size: 10px;
        padding: 10px 12px;
    }

    .volatility-row {
        padding: 10px 12px;
        font-size: 13px;
    }

    .company-name-line {
        font-size: 13px;
    }

    .ticker-chip {
        font-size: 10px;
        padding: 2px 4px;
    }

    .metric-main {
        font-size: 13px;
    }

    .badge-metric {
        min-width: 50px;
        height: 22px;
        font-size: 12px;
        padding: 3px 5px;
    }
}
